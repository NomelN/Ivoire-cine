<!-- Carte de film réutilisable -->
<div class="movie" data-movie-id="{{ movie.id }}">
    <a href="{{ url_for('movies.movie_detail', movie_id=movie.id) }}" class="movie-poster-link">
        {% if movie.poster_path %}
        <div class="movie-poster">
            <img src="{{ TMDB_IMAGE_BASE_URL }}{{ movie.poster_path }}"
                 alt="{{ movie.title }}"
                 loading="lazy"
                 onerror="this.src='https://via.placeholder.com/200x300?text=Pas+d+image'">
        </div>
        {% else %}
        <div class="movie-poster placeholder">
            <span>Pas d'image</span>
        </div>
        {% endif %}
    </a>

    <h3><a href="{{ url_for('movies.movie_detail', movie_id=movie.id) }}" class="movie-title-link">{{ movie.title }}</a></h3>

    <p class="release-date">
        Sortie : {{ movie.release_date or "Date inconnue" }}
    </p>

    <div class="rating">
        {% set rating = (movie.vote_average / 2) | round(0, 'floor') %}
        {% for i in range(1, 6) %}
            {% if i <= rating %}
            <span class="star filled">⭐</span>
            {% else %}
            <span class="star">☆</span>
            {% endif %}
        {% endfor %}
    </div>
</div>